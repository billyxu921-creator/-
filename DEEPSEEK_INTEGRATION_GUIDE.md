# DeepSeek AI é›†æˆæŒ‡å—

## æ¦‚è¿°

æœ¬ç³»ç»Ÿå·²é›†æˆDeepSeek AIï¼Œåœ¨è·å–è‚¡å§æ•°æ®åè‡ªåŠ¨è°ƒç”¨AIè¿›è¡Œæ·±åº¦åˆ†æï¼Œæä¾›æƒ…ç»ªé‡åŒ–ã€é€»è¾‘æå–å’Œç½®ä¿¡åº¦è¯„ä¼°ã€‚

---

## å¿«é€Ÿå¼€å§‹

### 1. è·å–DeepSeek API Key

è®¿é—® DeepSeek å®˜ç½‘è·å–APIå¯†é’¥ï¼š
- å®˜ç½‘: https://platform.deepseek.com/
- æ³¨å†Œè´¦å·å¹¶è·å–API Key
- æŸ¥çœ‹å®šä»·: https://platform.deepseek.com/pricing

### 2. é…ç½®API Key

**æ–¹å¼1: ç¯å¢ƒå˜é‡ï¼ˆæ¨èï¼‰**
```bash
export DEEPSEEK_API_KEY="your_api_key_here"
```

**æ–¹å¼2: é…ç½®æ–‡ä»¶**
```bash
# å¤åˆ¶é…ç½®æ–‡ä»¶
cp config.example.py config.py

# ç¼–è¾‘config.pyï¼Œå¡«å…¥ä½ çš„API Key
vim config.py
```

**æ–¹å¼3: ä»£ç ä¸­ç›´æ¥è®¾ç½®**
```python
from deepseek_analyzer import DeepSeekAnalyzer

analyzer = DeepSeekAnalyzer(api_key="your_api_key_here")
```

### 3. è¿è¡ŒAIå¢å¼ºåˆ†æ

```bash
python3 run_analysis_with_ai.py
```

---

## AIåˆ†æåŠŸèƒ½

### æ ¸å¿ƒèƒ½åŠ›

DeepSeek AI ä¼šå¯¹æ¯æ¡å¸–å­è¿›è¡Œä»¥ä¸‹åˆ†æï¼š

#### 1. **æå–æ ‡çš„**
è‡ªåŠ¨è¯†åˆ«å¸–å­ä¸­æåˆ°çš„è‚¡ç¥¨ä»£ç æˆ–ç®€ç§°
```
è¾“å…¥: "å±±ä¸œé»„é‡‘ä»Šæ—¥çªç ´..."
è¾“å‡º: stock_name: "å±±ä¸œé»„é‡‘(600547)"
```

#### 2. **æƒ…ç»ªé‡åŒ–**
ç»™å‡º -1.0 (æåº¦ææ…Œ) åˆ° 1.0 (æåº¦ä¹è§‚) çš„ç²¾ç¡®åˆ†å€¼
```
-1.0 â† æåº¦ææ…Œ
-0.7 â† æ‚²è§‚
-0.3 â† åæ‚²è§‚
 0.0 â† ä¸­æ€§
 0.3 â† åä¹è§‚
 0.7 â† ä¹è§‚
 1.0 â† æåº¦ä¹è§‚
```

#### 3. **é€»è¾‘æå–**
ç”¨ä¸€å¥è¯æ€»ç»“å¸–å­çš„æ ¸å¿ƒè®ºç‚¹
```
ç¤ºä¾‹:
- "æŠ€æœ¯é¢çªç ´60æ—¥å‡çº¿ï¼ŒMACDé‡‘å‰ï¼Œä¸»åŠ›èµ„é‡‘å‡€æµå…¥1.5äº¿"
- "ä¸šç»©é¢„å‘Šè¶…é¢„æœŸï¼Œå‡€åˆ©æ¶¦åŒæ¯”å¢é•¿45%"
- "å¤§å•å‹ç›˜ï¼Œä¸»åŠ›ä½ä½å¸ç­¹"
```

#### 4. **ç½®ä¿¡åº¦è¯„åˆ†**
è¯„ä¼°ä¿¡æ¯å¯ä¿¡åº¦ (0.0 åˆ° 1.0)
```
0.9-1.0: æ•°æ®è¯¦å®ï¼Œè®ºæ®å……åˆ†
0.7-0.9: æœ‰ä¸€å®šæ•°æ®æ”¯æ’‘
0.5-0.7: é€»è¾‘åŸºæœ¬æ¸…æ™°
0.3-0.5: ç¼ºä¹æ•°æ®æ”¯æ’‘
0.0-0.3: çº¯æƒ…ç»ªåŒ–è¡¨è¾¾
```

---

## è¾“å‡ºæ ¼å¼

### JSONæ ¼å¼

AIè¿”å›æ ‡å‡†JSONæ ¼å¼ï¼š
```json
{
  "stock_name": "å±±ä¸œé»„é‡‘(600547)",
  "sentiment_score": 0.75,
  "key_logic": "æŠ€æœ¯é¢çªç ´60æ—¥å‡çº¿ï¼ŒMACDé‡‘å‰ï¼Œä¸»åŠ›èµ„é‡‘å‡€æµå…¥1.5äº¿",
  "confidence_level": 0.85
}
```

### CSVæ ¼å¼

åˆ†æç»“æœä¿å­˜ä¸ºCSVæ–‡ä»¶ï¼ŒåŒ…å«ä»¥ä¸‹å­—æ®µï¼š
- stock_name: è‚¡ç¥¨åç§°
- sentiment_score: æƒ…ç»ªåˆ†å€¼
- key_logic: æ ¸å¿ƒé€»è¾‘
- confidence_level: ç½®ä¿¡åº¦
- åŸå§‹æ ‡é¢˜: å¸–å­æ ‡é¢˜
- åŸå§‹å†…å®¹: å¸–å­å†…å®¹
- å¸–å­é“¾æ¥: åŸå§‹é“¾æ¥
- å‘å¸ƒæ—¶é—´: å‘å¸ƒæ—¶é—´

---

## ä½¿ç”¨ç¤ºä¾‹

### ç¤ºä¾‹1: åŸºç¡€ä½¿ç”¨

```python
from guba_analyzer import GubaAnalyzer
from deepseek_analyzer import DeepSeekAnalyzer

# 1. è·å–è‚¡å§æ•°æ®
guba = GubaAnalyzer()
posts_df = guba.get_guba_trends(max_pages=3)

# 2. AIåˆ†æ
analyzer = DeepSeekAnalyzer(api_key="your_key")
results = analyzer.analyze_posts(posts_df)

# 3. æŸ¥çœ‹ç»“æœ
print(results[['stock_name', 'sentiment_score', 'confidence_level']])
```

### ç¤ºä¾‹2: æ‰¹é‡å¤„ç†

```python
# åˆ†æ‰¹å¤„ç†ï¼Œé¿å…è¯·æ±‚è¿‡å¿«
results = analyzer.analyze_posts(
    posts_df,
    batch_size=10,  # æ¯æ‰¹10æ¡
    delay=1         # é—´éš”1ç§’
)
```

### ç¤ºä¾‹3: ç”ŸæˆæŠ¥å‘Š

```python
# ç”ŸæˆAIåˆ†ææŠ¥å‘Š
report = analyzer.generate_analysis_report(results)
print(report)

# ä¿å­˜æŠ¥å‘Š
with open('ai_report.txt', 'w', encoding='utf-8') as f:
    f.write(report)
```

---

## AIåˆ†ææŠ¥å‘Šç¤ºä¾‹

```
================================================================================
DeepSeek AI æ·±åº¦åˆ†ææŠ¥å‘Š
ç”Ÿæˆæ—¶é—´: 2026å¹´01æœˆ14æ—¥ 16:00:00
================================================================================

ã€åˆ†ææ¦‚è§ˆã€‘
åˆ†ææ ‡çš„æ€»æ•°: 15
å¹³å‡æƒ…ç»ªåˆ†å€¼: 0.62
å¹³å‡ç½®ä¿¡åº¦: 0.73

ã€å¸‚åœºæƒ…ç»ªåˆ†å¸ƒã€‘
  ä¹è§‚æƒ…ç»ª: 10 æ¡ (66.7%)
  ä¸­æ€§æƒ…ç»ª: 3 æ¡ (20.0%)
  æ‚²è§‚æƒ…ç»ª: 2 æ¡ (13.3%)

ã€é«˜ç½®ä¿¡åº¦æ ‡çš„ TOP 10ã€‘
--------------------------------------------------------------------------------

1. å±±ä¸œé»„é‡‘(600547)
   æƒ…ç»ª: ğŸ“ˆ ä¹è§‚ (0.75)
   ç½®ä¿¡åº¦: 0.85
   æ ¸å¿ƒé€»è¾‘: æŠ€æœ¯é¢çªç ´60æ—¥å‡çº¿ï¼ŒMACDé‡‘å‰ï¼Œä¸»åŠ›èµ„é‡‘å‡€æµå…¥1.5äº¿
   åŸå§‹æ ‡é¢˜: å±±ä¸œé»„é‡‘çªç ´60æ—¥å‡çº¿ï¼ŒMACDé‡‘å‰ï¼Œä¸»åŠ›èµ„é‡‘å¤§å¹…æµå…¥

2. ç´«é‡‘çŸ¿ä¸š(601899)
   æƒ…ç»ª: ğŸ”¥ æåº¦ä¹è§‚ (0.80)
   ç½®ä¿¡åº¦: 0.90
   æ ¸å¿ƒé€»è¾‘: ä¸šç»©é¢„å‘Šè¶…é¢„æœŸï¼Œå‡€åˆ©æ¶¦åŒæ¯”å¢é•¿45%ï¼Œç¤¾ä¿åŸºé‡‘å¢æŒ
   åŸå§‹æ ‡é¢˜: ç´«é‡‘çŸ¿ä¸šä¸šç»©é¢„å‘Šè¶…é¢„æœŸï¼Œç¤¾ä¿åŸºé‡‘å¢æŒæ˜æ˜¾

...
```

---

## æˆæœ¬ä¼°ç®—

### DeepSeekå®šä»·ï¼ˆå‚è€ƒï¼‰

- è¾“å…¥: Â¥0.001 / 1K tokens
- è¾“å‡º: Â¥0.002 / 1K tokens

### æˆæœ¬è®¡ç®—ç¤ºä¾‹

å‡è®¾åˆ†æ100æ¡å¸–å­ï¼š
- å¹³å‡æ¯æ¡å¸–å­: 200 tokensè¾“å…¥ + 100 tokensè¾“å‡º
- æ€»è¾“å…¥: 100 Ã— 200 = 20,000 tokens = Â¥0.02
- æ€»è¾“å‡º: 100 Ã— 100 = 10,000 tokens = Â¥0.02
- **æ€»æˆæœ¬: â‰ˆ Â¥0.04**

éå¸¸ç»æµå®æƒ ï¼

---

## æ€§èƒ½ä¼˜åŒ–

### 1. æ‰¹é‡å¤„ç†

```python
# æ¨èé…ç½®
analyzer.analyze_posts(
    posts_df,
    batch_size=20,  # å¢å¤§æ‰¹æ¬¡
    delay=0.5       # å‡å°‘å»¶æ—¶ï¼ˆæ³¨æ„APIé™åˆ¶ï¼‰
)
```

### 2. å¹¶å‘è¯·æ±‚

```python
import concurrent.futures

def analyze_batch(batch):
    analyzer = DeepSeekAnalyzer(api_key=api_key)
    return analyzer.analyze_posts(batch)

# ä½¿ç”¨çº¿ç¨‹æ± 
with concurrent.futures.ThreadPoolExecutor(max_workers=3) as executor:
    futures = [executor.submit(analyze_batch, batch) for batch in batches]
    results = [f.result() for f in futures]
```

### 3. ç¼“å­˜ç»“æœ

```python
import hashlib
import pickle

def get_cache_key(text):
    return hashlib.md5(text.encode()).hexdigest()

# æ£€æŸ¥ç¼“å­˜
cache_key = get_cache_key(title + content)
if cache_key in cache:
    return cache[cache_key]

# ä¿å­˜åˆ°ç¼“å­˜
cache[cache_key] = result
```

---

## å¯¹æ¯”ï¼šAIåˆ†æ vs ä¼ ç»Ÿåˆ†æ

| ç»´åº¦ | AIåˆ†æ | ä¼ ç»Ÿåˆ†æ |
|------|--------|----------|
| **æƒ…ç»ªé‡åŒ–** | âœ… ç²¾ç¡®åˆ†å€¼(-1.0åˆ°1.0) | âŒ æ—  |
| **ç½®ä¿¡åº¦è¯„ä¼°** | âœ… è‡ªåŠ¨è¯„ä¼°(0.0åˆ°1.0) | âŒ æ—  |
| **è¯­ä¹‰ç†è§£** | âœ… æ·±åº¦ç†è§£å¤æ‚è¡¨è¿° | âš ï¸ åŸºäºå…³é”®è¯ |
| **åˆ†ç±»èƒ½åŠ›** | âš ï¸ éœ€è¦promptå¼•å¯¼ | âœ… ä¸‰ç»´åˆ†ç±»æ˜ç¡® |
| **æˆæœ¬** | âš ï¸ éœ€è¦APIè´¹ç”¨ | âœ… å…è´¹ |
| **é€Ÿåº¦** | âš ï¸ ä¾èµ–APIå“åº” | âœ… æœ¬åœ°å¿«é€Ÿ |
| **å¯è§£é‡Šæ€§** | âš ï¸ é»‘ç›’æ¨¡å‹ | âœ… è§„åˆ™æ˜ç¡® |
| **å‡†ç¡®æ€§** | âœ… é«˜ï¼ˆä¾èµ–æ¨¡å‹ï¼‰ | âš ï¸ ä¸­ç­‰ |

### å»ºè®®

**æœ€ä½³å®è·µ**: ç»“åˆä½¿ç”¨
1. ç”¨AIåˆ†æè·å–æƒ…ç»ªå’Œç½®ä¿¡åº¦
2. ç”¨ä¼ ç»Ÿåˆ†æè·å–åˆ†ç±»å’Œè®ºæ®
3. äº¤å‰éªŒè¯ï¼Œæé«˜å‡†ç¡®æ€§

---

## æ•…éšœæ’æŸ¥

### é—®é¢˜1: API Keyæ— æ•ˆ

```
é”™è¯¯: 401 Unauthorized
è§£å†³: æ£€æŸ¥API Keyæ˜¯å¦æ­£ç¡®ï¼Œæ˜¯å¦å·²æ¿€æ´»
```

### é—®é¢˜2: è¯·æ±‚è¶…æ—¶

```
é”™è¯¯: Request timeout
è§£å†³: 
1. å¢åŠ timeoutå‚æ•°
2. æ£€æŸ¥ç½‘ç»œè¿æ¥
3. å‡å°‘batch_size
```

### é—®é¢˜3: JSONè§£æå¤±è´¥

```
é”™è¯¯: JSON decode error
è§£å†³:
1. æ£€æŸ¥promptæ˜¯å¦æ˜ç¡®è¦æ±‚JSONæ ¼å¼
2. é™ä½temperatureå‚æ•°
3. æŸ¥çœ‹åŸå§‹å“åº”å†…å®¹
```

### é—®é¢˜4: æˆæœ¬è¿‡é«˜

```
è§£å†³:
1. å‡å°‘å¤„ç†çš„å¸–å­æ•°é‡
2. ä½¿ç”¨ç¼“å­˜é¿å…é‡å¤åˆ†æ
3. åªåˆ†æé«˜è´¨é‡å¸–å­
4. è€ƒè™‘ä½¿ç”¨æ›´ä¾¿å®œçš„æ¨¡å‹
```

---

## é«˜çº§åŠŸèƒ½

### è‡ªå®šä¹‰Prompt

```python
analyzer = DeepSeekAnalyzer(api_key=api_key)

# ä¿®æ”¹ç³»ç»Ÿæç¤ºè¯
analyzer.system_prompt = """
ä½ æ˜¯ä¸€ä¸ªä¸“ä¸šçš„è‚¡ç¥¨åˆ†æå¸ˆ...
[è‡ªå®šä¹‰çš„åˆ†æè¦æ±‚]
"""
```

### è°ƒæ•´æ¨¡å‹å‚æ•°

```python
# åœ¨_call_deepseek_apiæ–¹æ³•ä¸­ä¿®æ”¹
payload = {
    "model": "deepseek-chat",
    "temperature": 0.1,  # æ›´ç¨³å®šçš„è¾“å‡º
    "max_tokens": 1000,  # æ›´è¯¦ç»†çš„åˆ†æ
    "top_p": 0.9
}
```

### å¤šè½®å¯¹è¯

```python
# å®ç°å¤šè½®åˆ†æ
messages = [
    {"role": "system", "content": system_prompt},
    {"role": "user", "content": "ç¬¬ä¸€è½®åˆ†æ..."},
    {"role": "assistant", "content": "ç¬¬ä¸€è½®ç»“æœ..."},
    {"role": "user", "content": "è¯·è¿›ä¸€æ­¥åˆ†æ..."}
]
```

---

## æœ€ä½³å®è·µ

### 1. Promptå·¥ç¨‹

- âœ… æ˜ç¡®è¾“å‡ºæ ¼å¼ï¼ˆJSONï¼‰
- âœ… æä¾›å…·ä½“ç¤ºä¾‹
- âœ… é™å®šè¾“å‡ºèŒƒå›´
- âœ… ä½¿ç”¨ç»“æ„åŒ–æŒ‡ä»¤

### 2. é”™è¯¯å¤„ç†

```python
try:
    result = analyzer.analyze_posts(posts_df)
except Exception as e:
    logger.error(f"AIåˆ†æå¤±è´¥: {e}")
    # é™çº§åˆ°ä¼ ç»Ÿåˆ†æ
    result = traditional_analyze(posts_df)
```

### 3. ç»“æœéªŒè¯

```python
# éªŒè¯AIè¾“å‡º
def validate_ai_result(result):
    if not (-1.0 <= result['sentiment_score'] <= 1.0):
        return False
    if not (0.0 <= result['confidence_level'] <= 1.0):
        return False
    return True
```

### 4. ç›‘æ§å’Œæ—¥å¿—

```python
import logging

logging.basicConfig(level=logging.INFO)
logger = logging.getLogger(__name__)

logger.info(f"AIåˆ†æå®Œæˆ: {len(results)} æ¡")
logger.warning(f"å¤±è´¥: {failed_count} æ¡")
```

---

## å¸¸è§é—®é¢˜

**Q: DeepSeek APIæœ‰è¯·æ±‚é™åˆ¶å—ï¼Ÿ**
A: æœ‰ï¼Œå…·ä½“é™åˆ¶è¯·æŸ¥çœ‹å®˜æ–¹æ–‡æ¡£ã€‚å»ºè®®æ·»åŠ è¯·æ±‚é—´éš”ã€‚

**Q: å¯ä»¥ä½¿ç”¨å…¶ä»–AIæ¨¡å‹å—ï¼Ÿ**
A: å¯ä»¥ï¼Œä¿®æ”¹APIè°ƒç”¨é€»è¾‘å³å¯æ”¯æŒOpenAIã€Claudeç­‰ã€‚

**Q: AIåˆ†æç»“æœå¯é å—ï¼Ÿ**
A: AIæä¾›å‚è€ƒï¼Œå»ºè®®ç»“åˆä¼ ç»Ÿåˆ†æå’Œäººå·¥åˆ¤æ–­ã€‚

**Q: å¦‚ä½•é™ä½æˆæœ¬ï¼Ÿ**
A: ä½¿ç”¨ç¼“å­˜ã€å‡å°‘å¤„ç†é‡ã€åªåˆ†æé«˜è´¨é‡å¸–å­ã€‚

---

## æŠ€æœ¯æ”¯æŒ

- DeepSeekæ–‡æ¡£: https://platform.deepseek.com/docs
- APIçŠ¶æ€: https://status.deepseek.com/
- é—®é¢˜åé¦ˆ: æäº¤Issueåˆ°é¡¹ç›®ä»“åº“

---

**ç‰ˆæœ¬**: v1.0  
**æ›´æ–°æ—¥æœŸ**: 2026-01-14  
**è®¸å¯è¯**: MIT License