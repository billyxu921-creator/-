# 黑马发现报告系统 - 使用指南

## 系统概述

黑马发现报告系统是一个综合分析工具，通过分析股吧广场讨论和验证硬指标，自动发现具有潜力的"黑马"股票。

## 核心功能

### 1. 广场逻辑分析

从股吧讨论中提取关键信号：

**六大黑马信号类型**：
- **筹码异动**: 大单压盘、主力吸筹、洗盘、筹码集中
- **资金动向**: 北向资金、外资流入、机构调研、社保增持
- **重组预期**: 重组、并购、资产注入、中字头、国企改革
- **业绩拐点**: 业绩反转、扭亏为盈、超预期、订单暴增
- **政策催化**: 政策扶持、行业利好、补贴、产业规划
- **技术突破**: 突破平台、放量突破、底部启动、MACD金叉

### 2. 硬指标核验

验证股票的基本面和技术面指标：

**基本面指标**：
- 流通股: 5-15亿股（黑马标准）
- 流通市值: 80-200亿元（中小盘）
- PE市盈率: <50（估值合理）
- PB市净率: <5（不过度高估）
- 国家队持仓: 有官方资本背书

**技术面指标**：
- KDJ状态: 低位金叉（底部信号）
- MACD状态: 金叉向上（趋势确认）

### 3. 匹配度评分

综合评估股票的黑马潜力（满分100分）：

```
评分体系：
├── 流通股匹配 (20分)
├── 流通市值匹配 (20分)
├── PE估值合理性 (15分)
├── PB估值合理性 (15分)
├── 国家队持仓 (20分)
└── 技术指标 (10分)

评级标准：
• 90-100分: ⭐⭐⭐ 强烈推荐关注
• 80-89分:  ⭐⭐ 高度推荐关注
• 70-79分:  ⭐ 推荐关注
• 60-69分:  可关注
```

## 使用方法

### 方法1: 完整流程（推荐）

```bash
python3 run_complete_analysis.py
```

这将执行完整的分析流程：
1. 获取股吧热点数据
2. 进行情报深度分析
3. 生成黑马发现报告
4. 保存所有结果

### 方法2: 单独使用

```python
from guba_analyzer import GubaAnalyzer
from intelligence_analyzer import IntelligenceAnalyzer
from dark_horse_finder import DarkHorseFinder

# 步骤1: 获取股吧数据
guba_analyzer = GubaAnalyzer()
posts_df = guba_analyzer.get_guba_trends(max_pages=5)

# 步骤2: 情报分析
intel_analyzer = IntelligenceAnalyzer()
intelligence_df = intel_analyzer.analyze_intelligence(posts_df)

# 步骤3: 黑马发现
finder = DarkHorseFinder()
report = finder.generate_dark_horse_report(intelligence_df)

print(report)
```

### 方法3: 使用自定义数据

```python
import pandas as pd
from dark_horse_finder import DarkHorseFinder

# 准备情报数据
intelligence_data = {
    '标题': ['某股票大单压盘...'],
    '识别股票': ['某股票(600xxx)'],
    '主要分类': ['筹码派'],
    '价值评分': [8],
    '原始内容': ['详细内容...']
}

intelligence_df = pd.DataFrame(intelligence_data)

# 生成报告
finder = DarkHorseFinder()
report = finder.generate_dark_horse_report(intelligence_df)
```

## 报告格式示例

```
================================================================================
黑马发现报告
生成时间: 2026年01月14日 15:30:00
================================================================================

本次共发现 2 只潜力黑马股票
评级标准: 匹配度≥90% [强烈推荐] | 80-89% [高度推荐] | 70-79% [推荐关注] | 60-69% [可关注]

================================================================================

【发现 1】某某股份 (600xxx)
--------------------------------------------------------------------------------

📊 广场逻辑分析:
  • 3 位资深用户提及该股
  • 讨论热度: 共 5 次提及
  • 发现信号类型:
    - 筹码异动: 2 次
    - 资金动向: 1 次
    - 重组预期: 1 次
    - 技术突破: 1 次
  • 关键论据:
    - 发现'大单压盘'迹象 (筹码异动)
    - 发现'主力吸筹'迹象 (筹码异动)
    - 发现'北向资金'迹象 (资金动向)
    - 发现'中字头'迹象 (重组预期)
    - 发现'KDJ低位金叉'迹象 (技术突破)

✅ 硬指标核验:
  • 流通股: 7.9 亿股 (✓ 匹配)
  • 流通市值: 138.5 亿元 (✓ 匹配)
  • 当前价格: 17.53 元
  • 市盈率PE: 28.5 (✓ 合理)
  • 市净率PB: 2.3 (✓ 合理)
  • 国家队持仓: ✓ 有
    持仓机构: 全国社保基金一零三组合, 中央汇金资产管理有限责任公司
  • KDJ状态: 低位
  • MACD状态: 金叉

🎯 综合结论: [⭐⭐⭐ 强烈推荐关注]
  • 匹配度评分: 95/100
  • 综合评价: 逻辑共振极强，多维度指标高度匹配

⚠️  风险提示:
  （无重大风险提示）

================================================================================

【发现 2】...

================================================================================

📋 报告总结:

• 高质量标的(2只): 
  某某股份(600xxx) - 匹配度95%
  某某科技(002xxx) - 匹配度88%

💡 操作建议:
  1. 优先关注匹配度≥80%的标的
  2. 结合实时行情验证技术面信号
  3. 关注后续公告和资金流向
  4. 控制仓位，分散投资风险

================================================================================
免责声明: 本报告仅供参考，不构成投资建议。投资有风险，入市需谨慎。
================================================================================
```

## 筛选逻辑详解

### 候选黑马筛选条件

1. **讨论热度**: 至少被提及2次
2. **资深用户**: 至少有2位资深用户（评分≥7）讨论
3. **信号多样性**: 至少有2种不同类型的黑马信号
4. **硬指标匹配**: 匹配度≥60%

### 为什么这些条件重要？

- **多次提及**: 避免偶然性，确保有持续关注
- **资深用户**: 高质量讨论，论据充分
- **信号多样**: 多维度共振，不是单一因素
- **硬指标**: 基本面支撑，不是纯炒作

## 实战应用

### 场景1: 发现潜力黑马

```
报告显示: 某股票匹配度95%，有大单压盘+国家队持仓+KDJ低位

操作策略:
1. 立即查看该股实时行情
2. 确认技术面是否在底部区域
3. 查看最近公告，确认无重大利空
4. 小仓位试探性介入
5. 设置止损位（-5%）
6. 分批建仓，控制总仓位≤20%
```

### 场景2: 多只黑马同时出现

```
报告显示: 3只股票匹配度均>80%

操作策略:
1. 对比三只股票的具体信号
2. 优先选择信号最强的1-2只
3. 分散投资，每只≤10%仓位
4. 设置不同的止盈止损策略
5. 持续跟踪，动态调整
```

### 场景3: 匹配度不高但信号强

```
报告显示: 某股票匹配度65%，但有强烈的重组预期

操作策略:
1. 谨慎对待，不急于介入
2. 持续跟踪后续消息
3. 等待更明确的信号
4. 如介入，严格控制仓位≤5%
```

## 注意事项

### 1. 数据时效性

- 股吧讨论实时变化，建议每日更新
- 硬指标数据有延迟，以实时行情为准
- 国家队持仓数据更新较慢（季度）

### 2. 风险控制

- 黑马股波动大，严格止损
- 不要满仓单只股票
- 注意市场整体环境
- 警惕消息面突变

### 3. 系统局限

- 依赖数据源质量
- 无法预测突发事件
- 技术指标有滞后性
- 需要人工复核判断

### 4. 合规使用

- 不传播内幕信息
- 不进行市场操纵
- 遵守交易规则
- 理性投资决策

## 自定义配置

### 调整黑马标准

```python
finder = DarkHorseFinder()

# 修改流通股范围
finder.hard_criteria['流通股'] = (3, 20)  # 改为3-20亿股

# 修改市值范围
finder.hard_criteria['流通市值'] = (50, 300)  # 改为50-300亿元
```

### 添加自定义信号

```python
# 添加新的信号类型
finder.dark_horse_signals['自定义信号'] = [
    '关键词1', '关键词2', '关键词3'
]
```

### 调整评分权重

修改 `_calculate_match_score` 方法中的权重分配。

## 常见问题

**Q: 为什么有些股票识别不出来？**
A: 需要在stock_mapping中添加该股票的简称和代码。

**Q: 匹配度多少算合格？**
A: 建议关注≥70%的标的，优先选择≥80%的。

**Q: 报告中的"资深用户"是什么？**
A: 发帖质量评分≥7分的用户，论据充分、逻辑清晰。

**Q: 国家队持仓数据准确吗？**
A: 当前使用简化逻辑，实际应用需接入真实股东数据。

**Q: 可以用于其他行业吗？**
A: 可以，修改关键词库和筛选标准即可。

## 技术支持

如有问题或建议，欢迎反馈。

---

**版本**: v1.0  
**更新日期**: 2026-01-14  
**许可证**: MIT License